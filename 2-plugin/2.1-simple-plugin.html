<script src="../node_modules/vue/dist/vue.js"></script>

<script>
  const RulesPlugin = {
    install(Vue) {
      Vue.mixin({
        created() {
          if (this.$options.hasOwnProperty("rules")) {
            Object.keys(this.$options.rules).forEach((key) => {
              const { validate, message } = this.$options.rules[key]
              this.$watch(key, (newValue) => {
                if (!validate(newValue)) {
                  console.log(message)
                }
              })
            })
          }
        },
      })
    },
  }

  Vue.use(RulesPlugin)
</script>
